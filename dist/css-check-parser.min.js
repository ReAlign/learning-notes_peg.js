"use strict";function peg$subclass(r,t){function e(){this.constructor=r}e.prototype=t.prototype,r.prototype=new e}function peg$SyntaxError(r,t,e,n){this.message=r,this.expected=t,this.found=e,this.location=n,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,peg$SyntaxError)}function peg$parse(r,t){t=void 0!==t?t:{};var e,n={},o={StartRule:B},a=B,u=function(r){return r.join("")},c=/^[a-zA-Z0-9_\-]/,i=L([["a","z"],["A","Z"],["0","9"],"_","-"],!1,!1),s=/^[#a-zA-Z0-9]/,p=L(["#",["a","z"],["A","Z"],["0","9"]],!1,!1),f=M("whitespace"),l=/^[ \t]/,h=L([" ","\t"],!1,!1),g=M("whitespaces"),x=M("Linebreak"),d=/^[\r\n]/,A=L(["\r","\n"],!1,!1),y=M("Linebreaks"),v=/^[#|.]/,E=L(["#","|","."],!1,!1),m=M("空白字符合辑"),C=M(""),S=j(":",!1),$=j(";",!1),w=j("{",!1),F=j("}",!1),b=0,R=[{line:1,column:1}],k=0,z=[],Z=0;if("startRule"in t){if(!(t.startRule in o))throw new Error("Can't start parsing from rule \""+t.startRule+'".');a=o[t.startRule]}function j(r,t){return{type:"literal",text:r,ignoreCase:t}}function L(r,t,e){return{type:"class",parts:r,inverted:t,ignoreCase:e}}function M(r){return{type:"other",description:r}}function T(t){var e,n=R[t];if(n)return n;for(e=t-1;!R[e];)e--;for(n={line:(n=R[e]).line,column:n.column};e<t;)10===r.charCodeAt(e)?(n.line++,n.column=1):n.column++,e++;return R[t]=n,n}function _(r,t){var e=T(r),n=T(t);return{start:{offset:r,line:e.line,column:e.column},end:{offset:t,line:n.line,column:n.column}}}function U(r){b<k||(b>k&&(k=b,z=[]),z.push(r))}function q(r,t,e){return new peg$SyntaxError(peg$SyntaxError.buildMessage(r,t),r,t,e)}function B(){var t,e;return t=b,(e=function(){var t,e,o,a,u,c,i,s,p,f;t=[],e=b,(o=P())!==n&&(a=O())!==n&&(u=D())!==n&&(c=P())!==n?(123===r.charCodeAt(b)?(i="{",b++):(i=n,0===Z&&U(w)),i!==n&&(s=Q())!==n?(125===r.charCodeAt(b)?(p="}",b++):(p=n,0===Z&&U(F)),p!==n&&(f=P())!==n?e=o=[o,a,u,c,i,s,p,f]:(b=e,e=n)):(b=e,e=n)):(b=e,e=n);for(;e!==n;)t.push(e),e=b,(o=P())!==n&&(a=O())!==n&&(u=D())!==n&&(c=P())!==n?(123===r.charCodeAt(b)?(i="{",b++):(i=n,0===Z&&U(w)),i!==n&&(s=Q())!==n?(125===r.charCodeAt(b)?(p="}",b++):(p=n,0===Z&&U(F)),p!==n&&(f=P())!==n?e=o=[o,a,u,c,i,s,p,f]:(b=e,e=n)):(b=e,e=n)):(b=e,e=n);return t}())!==n&&(t,e=function(r){const t=[];return r.forEach(r=>{const e={type:r[1],selector:r[2],items:[]};r[5].forEach(r=>{e.items.push({property:r[1],value:r[5]})}),t.push(e)}),t}(e)),t=e}function D(){var r,t,e;if(r=b,t=[],(e=H())!==n)for(;e!==n;)t.push(e),e=H();else t=n;return t!==n&&(r,t=u(t)),r=t}function G(){var r,t,e;if(r=b,t=[],(e=I())!==n)for(;e!==n;)t.push(e),e=I();else t=n;return t!==n&&(r,t=u(t)),r=t}function H(){var t;return c.test(r.charAt(b))?(t=r.charAt(b),b++):(t=n,0===Z&&U(i)),t}function I(){var t;return s.test(r.charAt(b))?(t=r.charAt(b),b++):(t=n,0===Z&&U(p)),t}function J(){var t;return Z++,l.test(r.charAt(b))?(t=r.charAt(b),b++):(t=n,0===Z&&U(h)),Z--,t===n&&(n,0===Z&&U(f)),t}function K(){var r,t;for(Z++,r=[],t=J();t!==n;)r.push(t),t=J();return Z--,r===n&&(t=n,0===Z&&U(g)),r}function N(){var t;return Z++,d.test(r.charAt(b))?(t=r.charAt(b),b++):(t=n,0===Z&&U(A)),Z--,t===n&&(n,0===Z&&U(x)),t}function O(){var t;return v.test(r.charAt(b))?(t=r.charAt(b),b++):(t=n,0===Z&&U(E)),t}function P(){var r,t,e;return Z++,r=b,(t=function(){var r,t;for(Z++,r=[],t=N();t!==n;)r.push(t),t=N();return Z--,r===n&&(t=n,0===Z&&U(y)),r}())!==n&&(e=K())!==n?r=t=[t,e]:(b=r,r=n),Z--,r===n&&(t=n,0===Z&&U(m)),r}function Q(){var t,e,o,a,u,c,i,s,p,f,l;for(Z++,t=[],e=b,(o=P())!==n&&(a=D())!==n&&(u=K())!==n?(58===r.charCodeAt(b)?(c=":",b++):(c=n,0===Z&&U(S)),c!==n&&(i=K())!==n&&(s=G())!==n&&(p=K())!==n?(59===r.charCodeAt(b)?(f=";",b++):(f=n,0===Z&&U($)),f!==n&&(l=P())!==n?e=o=[o,a,u,c,i,s,p,f,l]:(b=e,e=n)):(b=e,e=n)):(b=e,e=n);e!==n;)t.push(e),e=b,(o=P())!==n&&(a=D())!==n&&(u=K())!==n?(58===r.charCodeAt(b)?(c=":",b++):(c=n,0===Z&&U(S)),c!==n&&(i=K())!==n&&(s=G())!==n&&(p=K())!==n?(59===r.charCodeAt(b)?(f=";",b++):(f=n,0===Z&&U($)),f!==n&&(l=P())!==n?e=o=[o,a,u,c,i,s,p,f,l]:(b=e,e=n)):(b=e,e=n)):(b=e,e=n);return Z--,t===n&&(e=n,0===Z&&U(C)),t}if((e=a())!==n&&b===r.length)return e;throw e!==n&&b<r.length&&U({type:"end"}),q(z,k<r.length?r.charAt(k):null,k<r.length?_(k,k+1):_(k,k))}peg$subclass(peg$SyntaxError,Error),peg$SyntaxError.buildMessage=function(r,t){var e={literal:function(r){return'"'+o(r.text)+'"'},class:function(r){var t,e="";for(t=0;t<r.parts.length;t++)e+=r.parts[t]instanceof Array?a(r.parts[t][0])+"-"+a(r.parts[t][1]):a(r.parts[t]);return"["+(r.inverted?"^":"")+e+"]"},any:function(r){return"any character"},end:function(r){return"end of input"},other:function(r){return r.description}};function n(r){return r.charCodeAt(0).toString(16).toUpperCase()}function o(r){return r.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(r){return"\\x0"+n(r)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(r){return"\\x"+n(r)}))}function a(r){return r.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(r){return"\\x0"+n(r)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(r){return"\\x"+n(r)}))}return"Expected "+function(r){var t,n,o,a=new Array(r.length);for(t=0;t<r.length;t++)a[t]=(o=r[t],e[o.type](o));if(a.sort(),a.length>0){for(t=1,n=1;t<a.length;t++)a[t-1]!==a[t]&&(a[n]=a[t],n++);a.length=n}switch(a.length){case 1:return a[0];case 2:return a[0]+" or "+a[1];default:return a.slice(0,-1).join(", ")+", or "+a[a.length-1]}}(r)+" but "+function(r){return r?'"'+o(r)+'"':"end of input"}(t)+" found."},module.exports={SyntaxError:peg$SyntaxError,parse:peg$parse};