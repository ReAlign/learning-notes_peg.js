"use strict";function peg$subclass(r,t){function e(){this.constructor=r}e.prototype=t.prototype,r.prototype=new e}function peg$SyntaxError(r,t,e,n){this.message=r,this.expected=t,this.found=e,this.location=n,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,peg$SyntaxError)}function peg$parse(r,t){t=void 0!==t?t:{};var e,n={},o={StartRule:J},a=J,c=B("名称"),u=function(r){return r.join("")},i=B("组成名称的字符集"),s=/^[a-zA-Z0-9._\-]/,p=q([["a","z"],["A","Z"],["0","9"],".","_","-"],!1,!1),l=B("值"),f=B("组成值的字符集"),h=/^[#a-zA-Z0-9.]/,g=q(["#",["a","z"],["A","Z"],["0","9"],"."],!1,!1),A=B("空格"),x=/^[ \t]/,d=q([" ","\t"],!1,!1),y=B("换行"),v=/^[\r\n]/,E=q(["\r","\n"],!1,!1),m=B("选择器标识"),C=/^[#|.]/,S=q(["#","|","."],!1,!1),$=B("空白字符集"),F=B("单个选择器"),w=U(":",!1),b=U(";",!1),R=B("所有选择器"),z=U("{",!1),Z=U("}",!1),j=0,k=[{line:1,column:1}],M=0,T=[],_=0;if("startRule"in t){if(!(t.startRule in o))throw new Error("Can't start parsing from rule \""+t.startRule+'".');a=o[t.startRule]}function U(r,t){return{type:"literal",text:r,ignoreCase:t}}function q(r,t,e){return{type:"class",parts:r,inverted:t,ignoreCase:e}}function B(r){return{type:"other",description:r}}function D(t){var e,n=k[t];if(n)return n;for(e=t-1;!k[e];)e--;for(n={line:(n=k[e]).line,column:n.column};e<t;)10===r.charCodeAt(e)?(n.line++,n.column=1):n.column++,e++;return k[t]=n,n}function G(r,t){var e=D(r),n=D(t);return{start:{offset:r,line:e.line,column:e.column},end:{offset:t,line:n.line,column:n.column}}}function H(r){j<M||(j>M&&(M=j,T=[]),T.push(r))}function I(r,t,e){return new peg$SyntaxError(peg$SyntaxError.buildMessage(r,t),r,t,e)}function J(){var t,e;return t=j,(e=function(){var t,e,o,a,c,u,i,s,p,l;_++,t=[],e=j,(o=Q())!==n&&(a=P())!==n&&(c=K())!==n&&(u=Q())!==n?(123===r.charCodeAt(j)?(i="{",j++):(i=n,0===_&&H(z)),i!==n&&(s=V())!==n?(125===r.charCodeAt(j)?(p="}",j++):(p=n,0===_&&H(Z)),p!==n&&(l=Q())!==n?e=o=[o,a,c,u,i,s,p,l]:(j=e,e=n)):(j=e,e=n)):(j=e,e=n);for(;e!==n;)t.push(e),e=j,(o=Q())!==n&&(a=P())!==n&&(c=K())!==n&&(u=Q())!==n?(123===r.charCodeAt(j)?(i="{",j++):(i=n,0===_&&H(z)),i!==n&&(s=V())!==n?(125===r.charCodeAt(j)?(p="}",j++):(p=n,0===_&&H(Z)),p!==n&&(l=Q())!==n?e=o=[o,a,c,u,i,s,p,l]:(j=e,e=n)):(j=e,e=n)):(j=e,e=n);_--,t===n&&(e=n,0===_&&H(R));return t}())!==n&&(t,e=function(r){const t=[];return r.forEach(r=>{const e={type:r[1],selector:r[2],items:[]};r[5].forEach(r=>{e.items.push({property:r[1],value:r[5]})}),t.push(e)}),t}(e)),t=e}function K(){var r,t,e;if(_++,r=j,t=[],(e=L())!==n)for(;e!==n;)t.push(e),e=L();else t=n;return t!==n&&(r,t=u(t)),_--,(r=t)===n&&(t=n,0===_&&H(c)),r}function L(){var t;return _++,s.test(r.charAt(j))?(t=r.charAt(j),j++):(t=n,0===_&&H(p)),_--,t===n&&(n,0===_&&H(i)),t}function N(){var r,t,e;if(_++,r=j,t=[],(e=O())!==n)for(;e!==n;)t.push(e),e=O();else t=n;return t!==n&&(r,t=u(t)),_--,(r=t)===n&&(t=n,0===_&&H(l)),r}function O(){var t;return _++,h.test(r.charAt(j))?(t=r.charAt(j),j++):(t=n,0===_&&H(g)),_--,t===n&&(n,0===_&&H(f)),t}function P(){var t;return _++,C.test(r.charAt(j))?(t=r.charAt(j),j++):(t=n,0===_&&H(S)),_--,t===n&&(n,0===_&&H(m)),t}function Q(){var t,e,o;return _++,t=j,(e=function(){var t,e;for(_++,t=[],v.test(r.charAt(j))?(e=r.charAt(j),j++):(e=n,0===_&&H(E));e!==n;)t.push(e),v.test(r.charAt(j))?(e=r.charAt(j),j++):(e=n,0===_&&H(E));return _--,t===n&&(e=n,0===_&&H(y)),t}())!==n&&(o=function(){var t,e;for(_++,t=[],x.test(r.charAt(j))?(e=r.charAt(j),j++):(e=n,0===_&&H(d));e!==n;)t.push(e),x.test(r.charAt(j))?(e=r.charAt(j),j++):(e=n,0===_&&H(d));return _--,t===n&&(e=n,0===_&&H(A)),t}())!==n?t=e=[e,o]:(j=t,t=n),_--,t===n&&(e=n,0===_&&H($)),t}function V(){var t,e,o,a,c,u,i,s,p,l,f;for(_++,t=[],e=j,(o=Q())!==n&&(a=K())!==n&&(c=Q())!==n?(58===r.charCodeAt(j)?(u=":",j++):(u=n,0===_&&H(w)),u!==n&&(i=Q())!==n&&(s=N())!==n&&(p=Q())!==n?(59===r.charCodeAt(j)?(l=";",j++):(l=n,0===_&&H(b)),l!==n&&(f=Q())!==n?e=o=[o,a,c,u,i,s,p,l,f]:(j=e,e=n)):(j=e,e=n)):(j=e,e=n);e!==n;)t.push(e),e=j,(o=Q())!==n&&(a=K())!==n&&(c=Q())!==n?(58===r.charCodeAt(j)?(u=":",j++):(u=n,0===_&&H(w)),u!==n&&(i=Q())!==n&&(s=N())!==n&&(p=Q())!==n?(59===r.charCodeAt(j)?(l=";",j++):(l=n,0===_&&H(b)),l!==n&&(f=Q())!==n?e=o=[o,a,c,u,i,s,p,l,f]:(j=e,e=n)):(j=e,e=n)):(j=e,e=n);return _--,t===n&&(e=n,0===_&&H(F)),t}if((e=a())!==n&&j===r.length)return e;throw e!==n&&j<r.length&&H({type:"end"}),I(T,M<r.length?r.charAt(M):null,M<r.length?G(M,M+1):G(M,M))}peg$subclass(peg$SyntaxError,Error),peg$SyntaxError.buildMessage=function(r,t){var e={literal:function(r){return'"'+o(r.text)+'"'},class:function(r){var t,e="";for(t=0;t<r.parts.length;t++)e+=r.parts[t]instanceof Array?a(r.parts[t][0])+"-"+a(r.parts[t][1]):a(r.parts[t]);return"["+(r.inverted?"^":"")+e+"]"},any:function(r){return"any character"},end:function(r){return"end of input"},other:function(r){return r.description}};function n(r){return r.charCodeAt(0).toString(16).toUpperCase()}function o(r){return r.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(r){return"\\x0"+n(r)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(r){return"\\x"+n(r)}))}function a(r){return r.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(r){return"\\x0"+n(r)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(r){return"\\x"+n(r)}))}return"Expected "+function(r){var t,n,o,a=new Array(r.length);for(t=0;t<r.length;t++)a[t]=(o=r[t],e[o.type](o));if(a.sort(),a.length>0){for(t=1,n=1;t<a.length;t++)a[t-1]!==a[t]&&(a[n]=a[t],n++);a.length=n}switch(a.length){case 1:return a[0];case 2:return a[0]+" or "+a[1];default:return a.slice(0,-1).join(", ")+", or "+a[a.length-1]}}(r)+" but "+function(r){return r?'"'+o(r)+'"':"end of input"}(t)+" found."},module.exports={SyntaxError:peg$SyntaxError,parse:peg$parse};